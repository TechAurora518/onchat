<meta charset="UTF-8">
<input type="text" name="msg" id="msg">
<button onclick="send()">Send</button>

<script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.4.1/jquery.min.js"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/js-cookie/2.2.1/js.cookie.min.js"></script>
<script>
    const socket = new WebSocket("ws://test.hypergo.net:9501?sessid=" + Cookies.get("PHPSESSID") + "&rid=3");
    // Connection opened
    socket.addEventListener('open', function (event) {
        console.log("与服务器握手成功！");
    });
    // Listen for messages
    socket.addEventListener('message', function (event) {
        console.log("服务器对客户端说：", event.data);
    });

    function send() {
        var data = JSON.stringify({
            cmd: "chat",
            data: {
                msg: $("#msg").val(),
                style: []
            }
        });
        $("#msg").val("");
        socket.send(data);
    }
</script>